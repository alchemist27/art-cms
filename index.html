<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>슈가데코 - DIY 공예 디자인 스튜디오 ✨</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="/logo.png" alt="슈가데코" class="logo-image">
                <div class="logo-text">
                    <span class="brand-name">슈가데코</span>
                    <span class="brand-subtitle">✨ DIY 공예 디자인 스튜디오 ✨</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Left Panel - Tools & Items -->
        <aside class="left-panel">
            <!-- Search & Filter Section -->
            <section class="search-section">
                <div class="search-controls">
                    <div class="search-input-wrapper">
                        <input type="text" id="searchInput" placeholder="제품명, 키워드 검색.." class="search-input">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    <div class="filter-tags">
                        <div class="filter-group">
                            <div class="filter-group-header">
                                <label>타입</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="typeFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="비즈">비즈</button>
                                    <button class="tag-btn" data-filter="생크림/파츠">생크림/파츠</button>
                                    <button class="tag-btn" data-filter="팬던트">팬던트</button>
                                    <button class="tag-btn" data-filter="모루공예">모루공예</button>
                                    <button class="tag-btn" data-filter="부자재">부자재</button>
                                    <button class="tag-btn" data-filter="비녀공예">비녀공예</button>
                                    <button class="tag-btn" data-filter="끈/줄">끈/줄</button>
                                    <button class="tag-btn" data-filter="폰악세서리">폰악세서리</button>
                                    <button class="tag-btn" data-filter="기타/소품">기타/소품</button>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="colorFilterGroup">
                            <div class="filter-group-header">
                                <label>색상 (중복선택가능)</label>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <button class="filter-reset-btn" id="colorResetBtn" title="색상 필터 초기화">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                    <i class="fas fa-chevron-down accordion-icon"></i>
                                </div>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="colorFilters">
                                <button class="tag-btn active" data-filter="all">전체</button>
                                <button class="tag-btn color-btn" data-filter="transparent">
                                    <span class="color-preview" style="background-color: transparent; border: 1px solid #e2e8f0;"></span>
                                    투명
                                </button>
                                <button class="tag-btn color-btn" data-filter="pink">
                                    <span class="color-preview" style="background-color: #ec4899;"></span>
                                    핑크
                                </button>
                                <button class="tag-btn color-btn" data-filter="red">
                                    <span class="color-preview" style="background-color: #ef4444;"></span>
                                    레드
                                </button>
                                <button class="tag-btn color-btn" data-filter="orange">
                                    <span class="color-preview" style="background-color: #f97316;"></span>
                                    오렌지
                                </button>
                                <button class="tag-btn color-btn" data-filter="yellow">
                                    <span class="color-preview" style="background-color: #f59e0b;"></span>
                                    옐로우
                                </button>
                                <button class="tag-btn color-btn" data-filter="green">
                                    <span class="color-preview" style="background-color: #10b981;"></span>
                                    그린
                                </button>
                                <button class="tag-btn color-btn" data-filter="blue">
                                    <span class="color-preview" style="background-color: #3b82f6;"></span>
                                    블루
                                </button>
                                <button class="tag-btn color-btn" data-filter="purple">
                                    <span class="color-preview" style="background-color: #8b5cf6;"></span>
                                    퍼플
                                </button>
                                <button class="tag-btn color-btn" data-filter="brown">
                                    <span class="color-preview" style="background-color: #8b4513;"></span>
                                    브라운
                                </button>
                                <button class="tag-btn color-btn" data-filter="black">
                                    <span class="color-preview" style="background-color: #2d2d2d;"></span>
                                    블랙
                                </button>
                                <button class="tag-btn color-btn" data-filter="white">
                                    <span class="color-preview" style="background-color: #f8fafc; border: 1px solid #e2e8f0;"></span>
                                    화이트
                                </button>
                                <button class="tag-btn color-btn" data-filter="pearl">
                                    <span class="color-preview" style="background-color: #f0f0f0; border: 1px solid #d0d0d0;"></span>
                                    진주
                                </button>
                                <button class="tag-btn color-btn" data-filter="gold">
                                    <span class="color-preview" style="background-color: #ffd700;"></span>
                                    골드
                                </button>
                                <button class="tag-btn color-btn" data-filter="silver">
                                    <span class="color-preview" style="background-color: #c0c0c0;"></span>
                                    실버
                                </button>
                            </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="directionFilterGroup" style="display:none;">
                            <div class="filter-group-header">
                                <label>비즈 종류</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="directionFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="가로펀칭">가로펀칭</button>
                                    <button class="tag-btn" data-filter="세로펀칭">세로펀칭</button>
                                    <button class="tag-btn" data-filter="원형비즈">원형비즈</button>
                                    <button class="tag-btn" data-filter="시드비즈">시드비즈</button>
                                    <button class="tag-btn" data-filter="단추">단추</button>

                                </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="creamPartFilterGroup" style="display:none;">
                            <div class="filter-group-header">
                                <label>생크림/파츠 종류</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="creamPartFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="생크림">생크림</button>
                                    <button class="tag-btn" data-filter="세트상품">세트상품</button>
                                    <button class="tag-btn" data-filter="하트/별/달">하트/별/달</button>
                                    <button class="tag-btn" data-filter="꽃/리본">꽃/리본</button>
                                    <button class="tag-btn" data-filter="음식">음식</button>
                                    <button class="tag-btn" data-filter="그릇">그릇</button>
                                    <button class="tag-btn" data-filter="동물">동물</button>
                                    <button class="tag-btn" data-filter="기타">기타</button>
                                    <button class="tag-btn" data-filter="진주/큐빅">진주/큐빅</button>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="moruFilterGroup" style="display:none;">
                            <div class="filter-group-header">
                                <label>모루공예 타입</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="moruFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="모루철사">모루철사</button>
                                    <button class="tag-btn" data-filter="눈코입">눈코입</button>
                                    <button class="tag-btn" data-filter="옷/소품">옷/소품</button>
                                    <button class="tag-btn" data-filter="리본/꾸미기">리본/꾸미기</button>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="bunjaeFilterGroup" style="display:none;">
                            <div class="filter-group-header">
                                <label>부자재 타입</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="bunjaeFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="키링류">키링류</button>
                                    <button class="tag-btn" data-filter="체인/o링">체인/o링</button>
                                    <button class="tag-btn" data-filter="마감,9/T핀">마감,9/T핀</button>
                                    <button class="tag-btn" data-filter="악세사리">악세사리</button>
                                    <button class="tag-btn" data-filter="책갈피/기타">책갈피/기타</button>
                                    <button class="tag-btn" data-filter="헤어장식">헤어장식</button>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="hairpinFilterGroup" style="display:none;">
                            <div class="filter-group-header">
                                <label>비녀공예 타입</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="hairpinFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="뒤꽃이/브로치">뒤꽃이/브로치</button>
                                    <button class="tag-btn" data-filter="자개꽃/꽃수술">자개꽃/꽃수술</button>
                                    <button class="tag-btn" data-filter="원석/자개">원석/자개</button>
                                    <button class="tag-btn" data-filter="금속,큐빅">금속,큐빅</button>
                                    <button class="tag-btn" data-filter="진주,자개구슬">진주,자개구슬</button>
                                    <button class="tag-btn" data-filter="론델/원석구슬">론델/원석구슬</button>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="pendantFilterGroup" style="display:none;">
                            <div class="filter-group-header">
                                <label>팬던트 모양</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="pendantFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="하트/별/달">하트/별/달</button>
                                    <button class="tag-btn" data-filter="리본/꽃">리본/꽃</button>
                                    <button class="tag-btn" data-filter="진주/자개/바다">진주/자개/바다</button>
                                    <button class="tag-btn" data-filter="동물">동물</button>
                                    <button class="tag-btn" data-filter="음식">음식</button>
                                    <button class="tag-btn" data-filter="링/기타">링/기타</button>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="stringFilterGroup" style="display:none;">
                            <div class="filter-group-header">
                                <label>끈/줄 타입</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="stringFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="낚싯줄">낚싯줄</button>
                                    <button class="tag-btn" data-filter="우레탄줄">우레탄줄</button>
                                    <button class="tag-btn" data-filter="폴리끈">폴리끈</button>
                                    <button class="tag-btn" data-filter="왁스끈">왁스끈</button>
                                    <button class="tag-btn" data-filter="합사">합사</button>
                                    <button class="tag-btn" data-filter="와이어">와이어</button>
                                    <button class="tag-btn" data-filter="기타">기타</button>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group collapsed" id="phoneAccessoryFilterGroup" style="display:none;">
                            <div class="filter-group-header">
                                <label>폰악세서리 타입</label>
                                <i class="fas fa-chevron-down accordion-icon"></i>
                            </div>
                            <div class="filter-group-content">
                                <div class="tag-buttons" id="phoneAccessoryFilters">
                                    <button class="tag-btn active" data-filter="all">전체</button>
                                    <button class="tag-btn" data-filter="맥세이프">맥세이프</button>
                                    <button class="tag-btn" data-filter="스마트톡">스마트톡</button>
                                    <button class="tag-btn" data-filter="폰케이스">폰케이스</button>
                                    <button class="tag-btn" data-filter="기타">기타</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Items Grid -->
            <section class="items-section">
                <div class="items-header">
                    <h3><i class="fas fa-th-large"></i> 제품 목록</h3>
                    <div class="sort-tabs" id="sortTabs">
                        <button class="sort-tab active" data-sort="popular">
                            <i class="fas fa-fire"></i>
                            인기순
                        </button>
                        <button class="sort-tab" data-sort="small">
                            <i class="fas fa-sort-amount-down"></i>
                            작은순
                        </button>
                        <button class="sort-tab" data-sort="large">
                            <i class="fas fa-sort-amount-up"></i>
                            큰순
                        </button>
                    </div>
                </div>
                <div class="items-grid" id="itemsGrid">
                    <!-- Items will be loaded here dynamically -->
                </div>
            </section>
        </aside>

        <!-- Center Panel - Canvas Area -->
        <section class="canvas-section">
            <div class="canvas-top-controls">
                <div class="canvas-header">
                    <h3><i class="fas fa-palette"></i></h3>
                    <div class="canvas-controls">
                        <button class="control-btn" id="undoBtn" title="실행 취소">
                            <i class="fas fa-undo"></i>
                        </button>
                        <button class="control-btn" id="redoBtn" title="다시 실행">
                            <i class="fas fa-redo"></i>
                        </button>
                        <button class="control-btn" id="captureBtn" title="캡처">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-scissors-icon lucide-square-scissors"><rect width="20" height="20" x="2" y="2" rx="2"/><circle cx="8" cy="8" r="2"/><path d="M9.414 9.414 12 12"/><path d="M14.8 14.8 18 18"/><circle cx="8" cy="16" r="2"/><path d="m18 6-8.586 8.586"/></svg>
                        </button>
                        <div style="display: none; align-items: center; gap: 8px;">
                            <label for="testSizeSelect" style="font-size: 12px; color: #64748b;">테스트 크기:</label>
                            <select id="testSizeSelect" style="padding: 4px 8px; border-radius: 6px; border: 1px solid #e2e8f0; font-size: 12px; cursor: pointer;">
                                <option value="2">2mm</option>
                                <option value="5">5mm</option>
                                <option value="10">10mm</option>
                                <option value="20">20mm</option>
                            </select>
                            <button class="control-btn" id="testSizeBtn" title="실제 크기 테스트">
                                <i class="fas fa-ruler"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Layer Controls -->
                <div class="layer-section-inline">
                    <div class="layer-controls-inline">
                        <button class="layer-btn-inline" id="bringToFrontBtn">
                            <i class="fas fa-arrow-up"></i>
                            앞으로
                        </button>
                        <button class="layer-btn-inline" id="sendToBackBtn">
                            <i class="fas fa-arrow-down"></i>
                            뒤로
                        </button>
                        <button class="layer-btn-inline" id="flipHorizontalBtn">
                            <i class="fas fa-arrows-alt-h"></i>
                            좌우반전
                        </button>
                        <button class="layer-btn-inline" id="duplicateBtn">
                            <i class="fas fa-copy"></i>
                            복제
                        </button>
                        <button class="layer-btn-inline danger" id="deleteBtn">
                            <i class="fas fa-trash"></i>
                            삭제
                        </button>
                    </div>
                </div>

                <!-- Action Controls -->
                <div class="action-section-inline">
                    <div class="action-controls-inline">
                        <button class="layer-btn-inline" id="resetBtn">
                            <i class="fas fa-refresh"></i>
                            초기화
                        </button>
                        <button class="layer-btn-inline" id="fullscreenBtn">
                            <i class="fas fa-expand"></i>
                            실제 사이즈 보기
                        </button>
                    </div>
                </div>
            </div>
            <div class="canvas-wrapper" id="canvasWrapper">
                <canvas id="designCanvas" width="800" height="600"></canvas>
                <div class="canvas-overlay" id="canvasOverlay">
                    <div class="welcome-message">
                        <div class="logo-watermark">
                            <img src="/logo.png" alt="슈가데코 로고" class="watermark-logo">
                        </div>
                        <h3>✨ 나만의 특별한 디자인을 만들어보세요! ✨</h3>
                        <p>💕 배경 이미지를 먼저 선택 후, 좌측에서 예쁜 비즈와 파츠를 선택하세요 💕</p>
                        <p>PC에서 접속하셔야 더욱 편리하게 작업하실 수 있습니다</p>
                    </div>
                </div>
            </div>
            <div class="canvas-zoom-controls">
                <button class="zoom-btn" id="zoomOutBtn" title="축소">
                    <i class="fas fa-search-minus"></i>
                </button>
                <div class="zoom-level-display" id="zoomLevelDisplay">100%</div>
                <button class="zoom-btn" id="zoomInBtn" title="확대">
                    <i class="fas fa-search-plus"></i>
                </button>
            </div>

            <!-- Canvas Button Guide -->
            <div class="canvas-button-guide">
                <div class="guide-content">
                    <div class="guide-item">
                        <span class="guide-icon red-circle">×</span>
                        <span><strong>개별 삭제 버튼<br></strong>선택한 제품 삭제</span>
                    </div>
                    <div class="guide-item">
                        <i class="fas fa-times-circle"></i>
                        <span><strong>동시 삭제 버튼<br></strong>Shift키 누른 상태로 선택한 제품 한번에 삭제</span>
                    </div>
                    <div class="guide-item">
                        <span class="guide-icon green-circle">+</span>
                        <span><strong>복제 버튼<br></strong>선택한 제품 복사하기</span>
                    </div>
                    <div class="guide-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#6366f1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                            <path d="M3 3v5h5"/>
                            <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/>
                            <path d="M16 16h5v5"/>
                        </svg>
                        <span><strong>회전 버튼<br></strong>드래그하여 자유롭게 회전</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Right Panel - Background & Options -->
        <aside class="right-panel">
            <!-- Background Selection -->
            <section class="background-section">
                <div class="section-header">
                    <h3><i class="fas fa-image"></i>나의 배경 불러오기</h3>
                    <button class="upload-btn" id="uploadBackgroundBtn" title="로컬 이미지 업로드">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wallpaper-icon lucide-wallpaper"><circle cx="8" cy="9" r="2"/><path d="m9 17 6.1-6.1a2 2 0 0 1 2.81.01L22 15V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2"/><path d="M8 21h8"/><path d="M12 17v4"/></svg>
                    </button>
                </div>
                <select id="backgroundCategoryDropdown" class="category-dropdown">
                    <option value="" disabled selected>기본배경 / MD추천디자인💕</option>
                    <option value="기본배경">기본 배경 이미지</option>
                    <option value="키링">키링(3)</option>
                    <option value="스트랩">스트랩</option>
                    <option value="모루인형">모루인형</option>
                    <option value="비녀/뒤꽂이">비녀/뒤꽂이(4)</option>
                    <option value="팔찌">팔찌</option>
                    <option value="목걸이">목걸이</option>
                    <option value="반지">반지</option>
                    <option value="귀걸이">귀걸이</option>
                    <option value="데코덴 케이스">데코덴 케이스</option>
                    <option value="스마트톡">스마트톡</option>
                </select>
                <input type="file" id="backgroundFileInput" accept="image/*" style="display: none;">
                <div class="background-grid" id="backgroundGrid">
                    <!-- Backgrounds will be loaded here dynamically -->
                </div>
            </section>

            <!-- Selected Items -->
            <section class="selected-section">
                <div class="section-header selected-section-header">
                    <h3><i class="fas fa-list"></i>구매 예정 아이템</h3>
                    <button class="reset-items-btn" id="resetItemsBtn" title="모든 아이템 초기화">
                        <i class="fas fa-trash-alt"></i>
                        초기화
                    </button>
                </div>
                <div class="selected-items" id="selectedItems">
                    <div class="quantity-guide-container">
                        <p>제품 수량을 조절해주세요.</p>
                    </div>
                    <div class="empty-state">
                        <i class="fas fa-heart"></i>
                        <p>예쁜 아이템을 선택해주세요</p>
                    </div>
                </div>
                <div class="cart-action">
                    <button class="btn btn-primary cart-btn" id="addToCartBtn">
                        <i class="fas fa-shopping-cart"></i>
                        장바구니 한번에 담기
                    </button>
                </div>
            </section>
        </aside>
    </main>

    <!-- Notification Toast -->
    <div id="notification" class="notification"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="/firebase-loader.js"></script>
    <!-- App Scripts -->
    <script src="/canvas-manager.js"></script>
    <script src="/filter-manager.js"></script>
    <script src="/app.js"></script>
</body>
</html> 